<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>simplebench.iteration &#8212; simplebench 0.1.0alpha0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=c309799c" />
    <link rel="stylesheet" type="text/css" href="../../_static/classic.css?v=2bf1fcf8" />
    
    <script src="../../_static/documentation_options.js?v=9a12e387"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">simplebench 0.1.0alpha0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" accesskey="U">Module code</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">simplebench.iteration</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for simplebench.iteration</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;Iteration class&quot;&quot;&quot;</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.defaults</span><span class="w"> </span><span class="kn">import</span> <span class="n">DEFAULT_INTERVAL_SCALE</span><span class="p">,</span> <span class="n">DEFAULT_INTERVAL_UNIT</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.doc_utils</span><span class="w"> </span><span class="kn">import</span> <span class="n">format_docstring</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.enums</span><span class="w"> </span><span class="kn">import</span> <span class="n">Section</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.exceptions</span><span class="w"> </span><span class="kn">import</span> <span class="n">SimpleBenchTypeError</span><span class="p">,</span> <span class="n">SimpleBenchValueError</span><span class="p">,</span> <span class="n">_IterationErrorTag</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.validators</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">validate_int</span><span class="p">,</span>
    <span class="n">validate_non_blank_string</span><span class="p">,</span>
    <span class="n">validate_non_negative_float</span><span class="p">,</span>
    <span class="n">validate_positive_float</span><span class="p">,</span>
    <span class="n">validate_positive_int</span><span class="p">,</span>
<span class="p">)</span>


<div class="viewcode-block" id="Iteration">
<a class="viewcode-back" href="../../source/simplebench.iteration.html#simplebench.iteration.Iteration">[docs]</a>
<span class="nd">@format_docstring</span><span class="p">(</span><span class="n">DEFAULT_INTERVAL_UNIT</span><span class="o">=</span><span class="n">DEFAULT_INTERVAL_UNIT</span><span class="p">,</span> <span class="n">DEFAULT_INTERVAL_SCALE</span><span class="o">=</span><span class="n">DEFAULT_INTERVAL_SCALE</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Iteration</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Container for the results of a single benchmark iteration.</span>

<span class="sd">    An iteration represents a single run of a benchmarked action (a run may consist of multiple rounds</span>
<span class="sd">    and a full benchmark consists of multiple iterations).</span>

<span class="sd">    It holds the elapsed time, n weight, unit, scale, memory usage, and peak memory usage for</span>
<span class="sd">    that iteration.</span>

<span class="sd">    Elapsed time is the total time taken for the iteration in the specified unit (e.g., nanoseconds)</span>
<span class="sd">    and scale (e.g., 1e-9 to convert nanoseconds to seconds) divided by the number of rounds</span>
<span class="sd">    as measured in the unit and scale specified. It is the average time per round for the iteration.</span>

<span class="sd">    So if an iteration with a unit of &#39;ns&#39; and a scale of 1e-9 had an `elapsed` time of 5000000</span>
<span class="sd">    (5 million nanoseconds) and 20 rounds, then the elapsed time would be equivalent to</span>
<span class="sd">    an average of (5000000 * 1e-9) / 20 = 0.00025 seconds per round.</span>

<span class="sd">    The n-weight represents the O(n) type complexity of the action being benchmarked.</span>
<span class="sd">    For example, if the action processes a list of size n, then the n-weight would be n.</span>

<span class="sd">    This allows data analysis tools to better understand the performance characteristics of the action</span>
<span class="sd">    being benchmarked when the benchmark data is exported, although it is not used directly in</span>
<span class="sd">    any calculations by SimpleBench itself currently.</span>

<span class="sd">    :ivar n: The complexity n-weight for the iteration. (read only)</span>
<span class="sd">    :vartype n: int</span>
<span class="sd">    :ivar rounds: The number of rounds in the iteration. (read only)</span>
<span class="sd">    :vartype rounds: int</span>
<span class="sd">    :ivar unit: The unit of measurement for the elapsed time.</span>
<span class="sd">        It gets its default value from :class:`~simplebench.defaults.DEFAULT_INTERVAL_UNIT`. (read only)</span>
<span class="sd">    :vartype unit: str</span>
<span class="sd">    :ivar scale: The scale factor for the elapsed time.</span>
<span class="sd">        It gets its default value from :class:`~simplebench.defaults.DEFAULT_INTERVAL_SCALE`. (read only)</span>
<span class="sd">    :vartype scale: float</span>
<span class="sd">    :ivar elapsed: The elapsed time for the iteration. (read only)</span>
<span class="sd">    :vartype elapsed: float</span>
<span class="sd">    :ivar ops_per_second: The number of operations per second. (read only)</span>
<span class="sd">    :vartype ops_per_second: float</span>
<span class="sd">    :ivar per_round_elapsed: The mean time for a single round scaled to the base unit. (read only)</span>
<span class="sd">    :vartype per_round_elapsed: float</span>
<span class="sd">    :ivar memory: The memory usage in bytes. (defaults to 0) (read only)</span>
<span class="sd">    :vartype memory: int</span>
<span class="sd">    :ivar peak_memory: The peak memory usage in bytes. (read only)</span>
<span class="sd">    :vartype peak_memory: int</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;_n&#39;</span><span class="p">,</span> <span class="s1">&#39;_rounds&#39;</span><span class="p">,</span> <span class="s1">&#39;_elapsed&#39;</span><span class="p">,</span> <span class="s1">&#39;_unit&#39;</span><span class="p">,</span> <span class="s1">&#39;_scale&#39;</span><span class="p">,</span> <span class="s1">&#39;_memory&#39;</span><span class="p">,</span> <span class="s1">&#39;_peak_memory&#39;</span><span class="p">)</span>

    <span class="nd">@format_docstring</span><span class="p">(</span><span class="n">DEFAULT_INTERVAL_UNIT</span><span class="o">=</span><span class="n">DEFAULT_INTERVAL_UNIT</span><span class="p">,</span> <span class="n">DEFAULT_INTERVAL_SCALE</span><span class="o">=</span><span class="n">DEFAULT_INTERVAL_SCALE</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                 <span class="o">*</span><span class="p">,</span>
                 <span class="n">n</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
                 <span class="n">rounds</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
                 <span class="n">unit</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">DEFAULT_INTERVAL_UNIT</span><span class="p">,</span>
                 <span class="n">scale</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">DEFAULT_INTERVAL_SCALE</span><span class="p">,</span>
                 <span class="n">elapsed</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span>
                 <span class="n">memory</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>  <span class="c1"># in bytes</span>
                 <span class="n">peak_memory</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>  <span class="c1"># in bytes</span>
                 <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize an Iteration instance.</span>

<span class="sd">        :param n: The complexity n-weight for the iteration. Must be a positive integer.</span>
<span class="sd">        :type n: int</span>
<span class="sd">        :param rounds: The number of rounds in the iteration. Must be a positive integer.</span>
<span class="sd">        :type rounds: int</span>
<span class="sd">        :param unit: The unit of measurement for the elapsed time.</span>
<span class="sd">            It gets its default value from :class:`~simplebench.defaults.DEFAULT_INTERVAL_UNIT`.</span>
<span class="sd">        :type unit: str</span>
<span class="sd">        :param scale: The scale factor for the elapsed time.</span>
<span class="sd">            It gets its default value from :class:`simplebench.defaults.DEFAULT_INTERVAL_SCALE`.</span>
<span class="sd">        :type scale: float</span>
<span class="sd">        :param elapsed: The elapsed time for the iteration. Must be a non-negative float.</span>
<span class="sd">        :type elapsed: float</span>
<span class="sd">        :param memory: The memory usage in bytes. Must be an integer.</span>
<span class="sd">        :type memory: int</span>
<span class="sd">        :param peak_memory: The peak memory usage in bytes. Must be an integer.</span>
<span class="sd">        :type peak_memory: int</span>
<span class="sd">        :raises SimpleBenchTypeError: If any of the arguments are of the wrong type.</span>
<span class="sd">        :raises SimpleBenchValueError: If any of the arguments have invalid values.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_n</span> <span class="o">=</span> <span class="n">validate_positive_int</span><span class="p">(</span>
            <span class="n">n</span><span class="p">,</span> <span class="s1">&#39;n&#39;</span><span class="p">,</span>
            <span class="n">_IterationErrorTag</span><span class="o">.</span><span class="n">N_ARG_TYPE</span><span class="p">,</span>
            <span class="n">_IterationErrorTag</span><span class="o">.</span><span class="n">N_ARG_VALUE</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_rounds</span> <span class="o">=</span> <span class="n">validate_positive_int</span><span class="p">(</span>
            <span class="n">rounds</span><span class="p">,</span> <span class="s1">&#39;rounds&#39;</span><span class="p">,</span>
            <span class="n">_IterationErrorTag</span><span class="o">.</span><span class="n">ROUNDS_ARG_TYPE</span><span class="p">,</span>
            <span class="n">_IterationErrorTag</span><span class="o">.</span><span class="n">ROUNDS_ARG_VALUE</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_unit</span> <span class="o">=</span> <span class="n">validate_non_blank_string</span><span class="p">(</span>
            <span class="n">unit</span><span class="p">,</span> <span class="s1">&#39;unit&#39;</span><span class="p">,</span>
            <span class="n">_IterationErrorTag</span><span class="o">.</span><span class="n">UNIT_ARG_TYPE</span><span class="p">,</span>
            <span class="n">_IterationErrorTag</span><span class="o">.</span><span class="n">UNIT_ARG_VALUE</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_scale</span> <span class="o">=</span> <span class="n">validate_positive_float</span><span class="p">(</span>
            <span class="n">scale</span><span class="p">,</span> <span class="s1">&#39;scale&#39;</span><span class="p">,</span>
            <span class="n">_IterationErrorTag</span><span class="o">.</span><span class="n">SCALE_ARG_TYPE</span><span class="p">,</span>
            <span class="n">_IterationErrorTag</span><span class="o">.</span><span class="n">SCALE_ARG_VALUE</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_elapsed</span> <span class="o">=</span> <span class="n">validate_non_negative_float</span><span class="p">(</span>
            <span class="n">elapsed</span><span class="p">,</span> <span class="s1">&#39;elapsed&#39;</span><span class="p">,</span>
            <span class="n">_IterationErrorTag</span><span class="o">.</span><span class="n">ELAPSED_ARG_TYPE</span><span class="p">,</span>
            <span class="n">_IterationErrorTag</span><span class="o">.</span><span class="n">ELAPSED_ARG_VALUE</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_memory</span> <span class="o">=</span> <span class="n">validate_int</span><span class="p">(</span>
            <span class="n">memory</span><span class="p">,</span> <span class="s1">&#39;memory&#39;</span><span class="p">,</span>
            <span class="n">_IterationErrorTag</span><span class="o">.</span><span class="n">MEMORY_ARG_TYPE</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_peak_memory</span> <span class="o">=</span> <span class="n">validate_int</span><span class="p">(</span>
            <span class="n">peak_memory</span><span class="p">,</span> <span class="s1">&#39;peak_memory&#39;</span><span class="p">,</span>
            <span class="n">_IterationErrorTag</span><span class="o">.</span><span class="n">PEAK_MEMORY_ARG_TYPE</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check equality between two Iteration instances.</span>

<span class="sd">        Two Iteration instances are considered equal if all their attributes are equal.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Iteration</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">n</span> <span class="ow">and</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">elapsed</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">elapsed</span> <span class="ow">and</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">unit</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">unit</span> <span class="ow">and</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">scale</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">scale</span> <span class="ow">and</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">memory</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">memory</span> <span class="ow">and</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">peak_memory</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">peak_memory</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">n</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The n weight of the iteration&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_n</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">rounds</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The number of rounds in the iteration&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rounds</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">unit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The unit of measurement for the elapsed time.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unit</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">scale</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The scale factor for the elapsed time.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scale</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">elapsed</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The total elapsed time for the iteration in the specified unit.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_elapsed</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">memory</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The memory usage in bytes. This is the difference between the allocated</span>
<span class="sd">        memory before and after the action.</span>

<span class="sd">        The edge case of no memory allocated results in a returned value of 0</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_memory</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">peak_memory</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The peak memory usage in bytes.</span>

<span class="sd">        This is the maximum memory allocated during the action.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_peak_memory</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">per_round_elapsed</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The mean time for a single round scaled to the base unit.</span>
<span class="sd">        If elapsed is 0, returns 0.0</span>

<span class="sd">        The per round computation is the elapsed time divided by the number</span>
<span class="sd">        of rounds in the iteration.</span>

<span class="sd">        The scaling to the base unit is done using the scale factor.</span>
<span class="sd">        This has the effect of converting the elapsed time into the base unit.</span>
<span class="sd">        For example, if the scale factor is 1e-9 then elapsed time in nanoseconds</span>
<span class="sd">        will be converted to seconds.</span>

<span class="sd">        :return: The mean time for a single round scaled to the base unit.</span>
<span class="sd">        :rtype: float</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_elapsed</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scale</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rounds</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">ops_per_second</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The number of operations per second.</span>

<span class="sd">        This is calculated as the inverse of the elapsed time.</span>

<span class="sd">        The edge cases of 0 elapsed time results in a returned value of 0.0</span>
<span class="sd">        This would otherwise be an impossible value and so flags a measurement error.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_elapsed</span> <span class="o">==</span> <span class="mf">0.0</span><span class="p">:</span>
            <span class="k">return</span> <span class="mf">0.0</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rounds</span> <span class="o">/</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_elapsed</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scale</span><span class="p">)</span>

<div class="viewcode-block" id="Iteration.iteration_section">
<a class="viewcode-back" href="../../source/simplebench.iteration.html#simplebench.iteration.Iteration.iteration_section">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">iteration_section</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">section</span><span class="p">:</span> <span class="n">Section</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the requested section of the benchmark results.</span>

<span class="sd">        :param section: The section of the results to return. Must be Section.OPS or Section.TIMING.</span>
<span class="sd">        :type section: Section</span>
<span class="sd">        :return: The requested section of the benchmark results.</span>
<span class="sd">        :rtype: Stats</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">section</span><span class="p">,</span> <span class="n">Section</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">SimpleBenchTypeError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s1">&#39;Invalid section type: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">section</span><span class="p">)</span><span class="si">}</span><span class="s1">. Must be of type Section.&#39;</span><span class="p">,</span>
                <span class="n">tag</span><span class="o">=</span><span class="n">_IterationErrorTag</span><span class="o">.</span><span class="n">ITERATION_SECTION_INVALID_SECTION_ARG_TYPE</span>
            <span class="p">)</span>
        <span class="k">match</span> <span class="n">section</span><span class="p">:</span>
            <span class="k">case</span> <span class="n">Section</span><span class="o">.</span><span class="n">OPS</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ops_per_second</span>
            <span class="k">case</span> <span class="n">Section</span><span class="o">.</span><span class="n">TIMING</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">per_round_elapsed</span>
            <span class="k">case</span> <span class="n">Section</span><span class="o">.</span><span class="n">MEMORY</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">memory</span>
            <span class="k">case</span> <span class="n">Section</span><span class="o">.</span><span class="n">PEAK_MEMORY</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">peak_memory</span>
            <span class="k">case</span><span class="w"> </span><span class="k">_</span><span class="p">:</span>  <span class="c1"># needed for mypy</span>
                <span class="k">raise</span> <span class="n">SimpleBenchValueError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s1">&#39;Invalid section: </span><span class="si">{</span><span class="n">section</span><span class="si">}</span><span class="s1">. Must be Section.OPS or Section.TIMING.&#39;</span><span class="p">,</span>
                    <span class="n">tag</span><span class="o">=</span><span class="n">_IterationErrorTag</span><span class="o">.</span><span class="n">ITERATION_SECTION_UNSUPPORTED_SECTION_ARG_VALUE</span>
                <span class="p">)</span></div>


    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a string representation of the Iteration instance.&quot;&quot;&quot;</span>
        <span class="n">unit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unit</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\\</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Iteration(n=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="si">}</span><span class="s2">, elapsed=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">elapsed</span><span class="si">}</span><span class="s2">, unit=&#39;</span><span class="si">{</span><span class="n">unit</span><span class="si">}</span><span class="s2">&#39;, &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;scale=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="si">}</span><span class="s2">, rounds=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">rounds</span><span class="si">}</span><span class="s2">, memory=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">memory</span><span class="si">}</span><span class="s2">, &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;peak_memory=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">peak_memory</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span></div>

</pre></div>

            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">simplebench 0.1.0alpha0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Module code</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">simplebench.iteration</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright 2025, Jerilyn Franz.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.1.3.
    </div>
  </body>
</html>